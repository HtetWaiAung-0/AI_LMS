<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Student</title>
    <link rel="stylesheet" href="./assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css" integrity="sha512-1sCRPdkRXhBV2PBLUdRb4tMg1w2YPf37qatUFeS7zlBy7jJI8Lf4VHwWfZZfpXtYSLy85pkm9GaYVYMfw5BC1A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.2/jquery-confirm.min.css">
    <link rel="stylesheet" href="./admin-student-add.css">
</head>
<body>
   
    <div id="header"></div>

    <section class="mt-5">
       <div class="container">
            <div id="student-add-card">
                <div class="title">
                    <div class=" main-title d-flex flex-row justify-content-center">
                        <h4>Batch Name</h4>                   
                    </div>
                    <div class="sub-title d-flex justify-content-between mb-2">
                        <h4>Course Name</h4>                    
                        <h4>Teacher Name</h4>
                    </div>                               
                </div>
                <div class="table-responsive">
                    <form action="" id="student-form">
                        <table class="table table-striped table-hover" id="student-table">
                            
                            <tr>
                                <!-- <th class="align-middle">#</th> -->
                                <th class="align-middle">Id</th>
                                <th class="align-middle">Password</th>
                                <th class="align-middle">Name</th>
                                <th>
                                    <span id="total-student">Total: 1</span>
                                    <button type="submit" class="btn text-primary"><i class="fa-solid fa-file me-1"></i>Save</button>
                                </th>
                            </tr>                       
                        
                            <tr class="form-row">
                                <div  class="row ">
                                    <!-- <td  class="align-middle">1.</td> -->
                                    <td><input type="text" class="form-control" name="id" placeholder="Id" required autofocus></td>
                                    <td><input type="text" class="form-control" name="password" placeholder="Password" required></td>
                                    <td><input type="text" class="form-control" name="name" placeholder="Name" required></td>
                                    
                                    <td class="btn-td">
                                        <button type="button" class="btn btn-outline-success add-row" ><i class="fa-solid fa-plus "></i></button>
                                        <button type="button" class="btn btn-outline-danger remove-row"><i class="fa-solid fa-minus "></i></button>
                                    </td>
                                </div>
                            </tr>
                            
                            
                           
                        </table>
                    </form>
    
                </div><!-- End table responsive -->
            </div>
        </div>
    </section><!--End Studen add Section-->

    <script src="./assets/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="./assets/jquery/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.2/jquery-confirm.min.js"></script>
    
    <script>
       
            var minRow = 1;

        //Add 
        $(document).on("click", ".add-row",function(e){
            e.preventDefault();
            var _row = '<tr class=" form-row">'+
                '<div class="row ">'+
                                '<td><input type="text" class="form-control" name="id" placeholder="Id" required autofocus></td>'+
                                '<td><input type="text" class="form-control" name="password" placeholder="Password" required></td>'+
                                '<td><input type="text" class="form-control" name="name" placeholder="Name" required></td>'+
                                '<td class="btn-td">'+
                                    '<button type="button" class="btn btn-outline-success add-row" ><i class="fa-solid fa-plus "></i></button>'+
                                    '<button type="button" class="btn btn-outline-danger remove-row ms-1"><i class="fa-solid fa-minus "></i></button>'+
                                '</td>'+
                            '</div>'+
                        '</tr>';
            $("#student-table").append(_row);
            minRow ++;
            $("#total-student").text('Total : '+minRow);
        })


        //Remove
        $(Document).on("click",".remove-row", function(e){
            e.preventDefault();           
            if(minRow > 1){
                $(this).parent().closest('tr').remove();
                minRow--;
                $("#total-student").text('Total : '+minRow);
            }
        })
       

        //ajax request to insert all form data
        $("#student-form").submit(function(e){
            e.preventDefault();
            var students = [];
            
            $('.form-row').each(function(){
                var student = {}
                $($(this).find('input')).each(function(){
                    student[$(this).attr('name')] = $(this).val()
                });
                students.push(student);
            })
            console.log(students);
            
            // $.ajax({
                
            //     data: $(this).serialize(),
            //     success: function(response){
            //         console.log(response);
            //     }
            // });
        });

    </script>

    <script>
    //      $(function () {
    //     $('#header').load('header.html')
    //   })
    </script>

</body>
</html>